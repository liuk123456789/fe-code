<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>wuyw</title>
    <link rel="stylesheet" href="/1.css" />
  </head>
  <body>
    <div id="getuser" class="red">getuser</div>
    <script src="https://h5.koocdn.com/chuguo/toefl-h5/static/js/login.js"></script>
    <div id="user" class="red">hello world</div>
    <script src="jsonp.js"></script>
  </body>

  <script>
    // jsonp({
    //     url: 'http://localhost:3001/getuser',
    //     params: {},
    //     callback: 'getuser'
    // }).then(r => {
    //     setTimeout(_ => {
    //         let user = document.querySelector('#user');
    //         user.innerText = r;
    //     }, 1000);
    //     console.log(r);
    // });
    // fetch('https://localhost:3001/getuser?callback=getuser').then(res => res.text()).then(r => {
    //     setTimeout(_ => {
    //         let getuser = document.querySelector('#getuser');
    //         getuser.innerText = r;
    //     }, 1000);
    // })
    // window.addEventListener('error', (error) => {
    //     console.log('addEventListener', error);
    // }, true)
    // window.onerror = function (event, source, lineno, colno, error) {
    //     console.log('onerror', error);
    //     // return true
    // };
    // try {
    //     setTimeout(() => {
    //         aa;
    //     });
    // } catch (e){
    //     console.log('try catch', e)
    // }
    window.addEventListener(
      "rejectionhandled",
      (event) => {
        console.log(event);
      },
      true
    );
    window.addEventListener(
      "unhandledrejection",
      (event) => {
        console.log("event: ", 11111);
        // event.stopImmediatePropagation();
      },
      true
    );
    window.addEventListener(
      "unhandledrejection",
      (event) => {
        console.log(22222);
        event.stopImmediatePropagation();
      },
      true
    );
    let a = Promise.reject("eee");
    setTimeout(() => {
      a.catch(() => "456");
    });
  </script>
  <!-- <script type="module">
    import {a, setA} from './module.js';
    console.log(a);
    setTimeout(() => {
        setA();
        console.log(a);
    }, 1000); 
</script> -->
</html>
